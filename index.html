<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Fixing Search</title>
    <style>
        /* Yükleme ekranı: Site çözülene kadar bu görünür */
        body { 
            margin: 0; 
            background: #050505; 
            color: white; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            height: 100vh; 
            overflow: hidden; 
            font-family: sans-serif; 
        }
        .loader-box { text-align: center; }
        .ring { 
            width: 45px; height: 45px; 
            border: 3px solid #1a1a1a; 
            border-top: 3px solid #00e5ff; 
            border-radius: 50%; 
            animation: spin 1s linear infinite; 
            margin: 0 auto 15px; 
        }
        @keyframes spin { to { transform: rotate(360deg); } }
        .text { letter-spacing: 3px; font-size: 11px; color: #444; text-transform: uppercase; }
    </style>
</head>
<body>

    <div class="loader-box">
        <div class="ring"></div>
        <div class="text">Sistem Çözülüyor...</div>
    </div>

    <script>
    async function sitemiYukle() {
        try {
            // 1. Şifreli TXT ve Anahtar dosyasını indiriyoruz
            const [sifreliVeri, anahtarTablosu] = await Promise.all([
                fetch("obfexfixingsearch.txt").then(r => r.text()),
                fetch("obfexkey.obfex").then(r => r.text())
            ]);

            // 2. Anahtar haritasını (Map) oluşturuyoruz
            const map = JSON.parse("{" + anahtarTablosu + "}");
            let tersMap = {};
            for (let k in map) { tersMap[map[k]] = k; }

            // 3. Şifre çözme işlemi
            const siraliAnahtarlar = Object.keys(tersMap).sort((a, b) => b.length - a.length);
            let cozulmusKod = "";
            let i = 0;

            while (i < sifreliVeri.length) {
                let buldu = false;
                for (let anahtar of siraliAnahtarlar) {
                    if (sifreliVeri.startsWith(anahtar, i)) {
                        cozulmusKod += tersMap[anahtar];
                        i += anahtar.length;
                        buldu = true;
                        break;
                    }
                }
                if (!buldu) {
                    cozulmusKod += sifreliVeri[i];
                    i++;
                }
            }

            // 4. KRİTİK ADIM: Mevcut sayfayı tamamen temizle ve çözülen kodu sıfırdan yaz
            // Bu yöntem tarayıcının <style> ve <script> etiketlerini tanımasını zorunlu kılar.
            document.open();
            document.write(cozulmusKod);
            document.close();

        } catch (hata) {
            console.error("Hata:", hata);
            document.body.innerHTML = "<div style='color:#ff3c3c; font-size:12px;'>Yükleme hatası! Dosyaları kontrol edin.</div>";
        }
    }

    // Çalıştır
    sitemiYukle();
    </script>
</body>
</html>
